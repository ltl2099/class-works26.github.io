<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安顺学院2025植物保护班级事务协同工作台</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <header>
        <h1><i class="fa-solid fa-leaf"></i> 安顺学院2025植物保护班级事务协同工作台</h1>
        <nav>
            <button id="nav-kanban" class="active"><i class="fa-solid fa-chalkboard-user"></i> 班级事务看板</button>
            <button id="nav-log"><i class="fa-solid fa-book"></i> 班委工作日志</button>
            <button id="nav-settings"><i class="fa-solid fa-cogs"></i> 设置与积分管理</button>
        </nav>
    </header>

    <main>
        <!-- 班级事务看板 -->
        <section id="kanban-section" class="content-section active">
            <div class="kanban-board">
                <div class="kanban-column" id="todo" ondragover="event.preventDefault()" ondrop="app.drop(event)">
                    <h3><i class="fa-solid fa-list-check"></i> 待办 (To-Do)</h3>
                    <div class="tasks" id="todo-tasks"></div>
                    <button class="add-task-btn" onclick="app.openTaskModal()"><i class="fa-solid fa-plus"></i> 添加新任务</button>
                </div>
                <div class="kanban-column" id="inprogress" ondragover="event.preventDefault()" ondrop="app.drop(event)">
                    <h3><i class="fa-solid fa-person-running"></i> 进行中 (In Progress)</h3>
                    <div class="tasks" id="inprogress-tasks"></div>
                </div>
                <div class="kanban-column" id="done" ondragover="event.preventDefault()" ondrop="app.drop(event)">
                    <h3><i class="fa-solid fa-check-circle"></i> 已完成 (Done)</h3>
                    <div class="tasks" id="done-tasks"></div>
                </div>
                <div class="kanban-column" id="cancelled" ondragover="event.preventDefault()" ondrop="app.drop(event)">
                    <h3><i class="fa-solid fa-times-circle"></i> 已取消/搁置</h3>
                    <div class="tasks" id="cancelled-tasks"></div>
                </div>
            </div>
        </section>

        <!-- 班委工作日志 -->
        <section id="log-section" class="content-section">
            <div class="section-header">
                <h2><i class="fa-solid fa-book"></i> 班委工作日志</h2>
                <button id="add-log-btn" class="add-btn"><i class="fa-solid fa-plus"></i> 添加日志记录</button>
            </div>
            <div class="table-container">
                <table id="log-table">
                    <thead>
                        <tr>
                            <th>日期</th>
                            <th>负责人</th>
                            <th>事项类别</th>
                            <th>内容简述</th>
                            <th>关键链接/截图</th>
                            <th>状态</th>
                            <th>备注</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- 设置与积分管理 -->
        <section id="settings-section" class="content-section">
            <div id="password-gate">
                 <h2><i class="fa-solid fa-lock"></i> 访问受限</h2>
                 <p>此区域为班委专用，请输入密码访问。</p>
                 <input type="password" id="password-input" placeholder="请输入密码">
                 <button id="password-submit">进入</button>
                 <p id="password-feedback" class="feedback"></p>
            </div>

            <div id="settings-content" style="display: none;">
                <h2><i class="fa-solid fa-cogs"></i> 班委密码设置</h2>
                <div class="settings-card">
                    <input type="password" id="new-password" placeholder="设置新密码">
                    <input type="password" id="confirm-password" placeholder="确认新密码">
                    <button id="save-password-btn">保存密码</button>
                    <p id="password-set-feedback" class="feedback"></p>
                </div>

                <h2><i class="fa-solid fa-scroll"></i> 积分规则说明</h2>
                <div class="settings-card rules">
                    <ul>
                        <li><span class="score-green">+4分:</span> 主动报名并出色完成任务</li>
                        <li><span class="score-green">+3分:</span> 积极响应号召并完成任务</li>
                        <li><span class="score-blue">+2分:</span> 接受任务摊派并完成</li>
                        <li><span class="score-red">扣分:</span> 根据具体情况，由班委讨论决定</li>
                        <li><span class="score-yellow">特殊贡献:</span> 如有重大贡献，需两位以上班委确认后记录，并详细注明事由。</li>
                    </ul>
                </div>
                
                <div class="section-header">
                    <h2><i class="fa-solid fa-star"></i> 班级积分记录</h2>
                    <div class="points-header">
                         <div class="total-points">
                            班级当前总积分: <span id="total-points-display">0</span>
                        </div>
                        <button id="add-point-btn" class="add-btn"><i class="fa-solid fa-plus"></i> 添加积分记录</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="points-table">
                        <thead>
                            <tr>
                                <th>日期</th>
                                <th>姓名</th>
                                <th>事项</th>
                                <th>积分变动</th>
                                <th>事由</th>
                                <th>班委确认</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>
    
    <!-- 全局模态框 -->
    <div id="modal-container" class="modal-container">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
